<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="images/favicon.ico" type="image/ico" />
    <title>Sync Devices - Gentelella</title>
    <script type="module" src="/src/main-minimal.js"></script>
    <script src="js/auth.js"></script>
    <link rel="stylesheet" href="css/sync_devices.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  </head>
  <body class="nav-md page-index">
    <div class="container body">
      <div class="main_container">
        <!-- Sidebar -->
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <div class="navbar nav_title" style="border: 0;">
              <a href="index.html" class="site_title"><i class="fas fa-paw"></i> <span>Cockpit!</span></a>
            </div>
            <div class="clearfix"></div>
            <!-- menu profile quick info -->
            <div class="profile clearfix">
              <div class="profile_pic">
              </div>
              <div class="profile_info">
                <span id="welcome-message">Welcome,</span>
                <h2 id="sidebar-username">Loading...</h2>
              </div>
            </div>
            <!-- /menu profile quick info -->
            <br />
            <!-- sidebar menu -->
            <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
              <div class="menu_section">
                <h3>General</h3>
                <ul class="nav side-menu">
                  <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                  <li><a><i class="fas fa-rocket"></i> Onboarding <span class="fas fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="#onboard-device">Onboard Device</a></li>
                      <li><a href="sync_devices.html" class="current-page">Sync Devices</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fas fa-cogs"></i> Configs <span class="fas fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="backup.html">Backup</a></li>
                      <li><a href="compare.html">Compare</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
              <div class="menu_section">
                <!-- Live On section removed as requested -->
              </div>
            </div>
            <!-- /sidebar menu -->
            <!-- /menu footer buttons -->
            <div class="sidebar-footer hidden-small">
              <a data-bs-toggle="tooltip" data-bs-placement="top" title="Settings">
                <span class="fas fa-cog" aria-hidden="true"></span>
              </a>
              <a data-bs-toggle="tooltip" data-bs-placement="top" title="FullScreen">
                <span class="fas fa-expand" aria-hidden="true"></span>
              </a>
              <a data-bs-toggle="tooltip" data-bs-placement="top" title="Lock">
                <span class="fas fa-eye-slash" aria-hidden="true"></span>
              </a>
              <a data-bs-toggle="tooltip" data-bs-placement="top" title="Logout" href="login.html" id="sidebar-logout" onclick="logout(); return false;">
                <span class="fas fa-power-off" aria-hidden="true"></span>
              </a>
            </div>
            <!-- /menu footer buttons -->
          </div>
        </div>
        <!-- /Sidebar -->
        <!-- Top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fas fa-bars"></i></a>
              </div>
              <nav class="nav navbar-nav">
              <ul class="navbar-right">
                <li class="nav-item dropdown open" style="padding-left: 15px;">
                  <a href="javascript:;" class="user-profile dropdown-toggle" aria-haspopup="true" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false"><span id="navbar-username">Loading...</span>
                  </a>
                  <div class="dropdown-menu dropdown-usermenu float-end" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item"  href="javascript:;"> Profile</a>
                      <a class="dropdown-item"  href="javascript:;">
                        <span class="badge bg-red float-end">50%</span>
                        <span>Settings</span>
                      </a>
                  <a class="dropdown-item"  href="javascript:;">Help</a>
                    <a class="dropdown-item" href="login.html" id="dropdown-logout" onclick="logout(); return false;"><i class="fas fa-sign-out-alt float-end"></i> Log Out</a>
                  </div>
                <li role="presentation" class="nav-item dropdown open">
                  <a href="javascript:;" class="dropdown-toggle info-number" id="navbarDropdown1" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-envelope"></i>
                    <span class="badge bg-green">6</span>
                  </a>
                  <ul class="dropdown-menu list-unstyled msg_list" role="menu" aria-labelledby="navbarDropdown1">
                    <li class="nav-item">
                      <a class="dropdown-item">
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    <!-- ...existing code for messages... -->
                  </ul>
              </ul>
            </nav>
          </div>
        </div>
        <!-- /top navigation -->
        <!-- page content -->
        <div class="right_col" role="main">
          <div class="page-title">
            <div class="title_left">
              <h3>Sync Devices</h3>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="row">
            <div class="col-md-12 col-sm-12">
              <div class="x_panel">
                <div class="x_content">
                  <div class="container-sync">
                    <div class="filter-bar" style="display:flex;align-items:center;gap:8px;margin-bottom:12px;">
                      <select id="filter-type" class="form-select" style="width:auto;">
                        <option value="name">Name</option>
                        <option value="prefix">Prefix</option>
                        <option value="location">Location</option>
                      </select>
                      <input id="filter-value" type="text" class="form-control" placeholder="Filter..." style="width:180px;">
                    </div>
                    <div class="tables-row">
                      <div class="table-container">
                        <table id="left-table" class="table table-striped table-bordered" style="width:100%">
                          <thead>
                            <tr>
                              <th><input type="checkbox" id="select-all-left"></th>
                              <th>Device</th>
                              <th>Primary IP</th>
                              <th>Location</th>
                              <th>Net</th>
                            </tr>
                          </thead>
                          <tbody id="left-table-body">
            <!-- Device rows go here -->
                          </tbody>
                        </table>
                      </div>
                      <div class="arrows-container">
                        <button class="arrow-btn" id="to-right"><i class="fas fa-arrow-right"></i></button>
                        <button class="arrow-btn" id="to-left"><i class="fas fa-arrow-left"></i></button>
                      </div>
                      <div class="table-container">
                        <table id="right-table" class="table table-striped table-bordered" style="width:100%">
                          <thead>
                            <tr>
                              <th><input type="checkbox" id="select-all-right"></th>
                              <th>Device</th>
                              <th>Primary IP</th>
                              <th>Location</th>
                              <th>Net</th>
                            </tr>
                          </thead>
                          <tbody id="right-table-body">
                            <!-- Device rows go here -->
                          </tbody>
                        </table>
                      </div>
                      <!-- Pagination for left table -->
                      <div class="row">
                        <div class="col-sm-12">
                          <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                            <div class="dataTables_paginate paging_simple_numbers" id="left-pagination">
                              <!-- Pagination will be inserted here -->
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="sync-properties">
                      <div style="background:#f5f5f5; color:#34495E; font-weight:600; font-size:18px; padding:10px 16px 8px 16px; border-radius:6px 6px 0 0; border-bottom:1px solid #e0e0e0; margin-bottom:0;">Sync Properties</div>
                      <div id="sync-placeholder" style="border-radius:0 0 6px 6px; border:1px solid #e0e0e0; border-top:none; padding:18px 16px 12px 16px; background:#fff;">
                        <form id="sync-network-form">
                          <div style="display: flex; gap: 16px; margin-bottom: 12px; align-items: flex-start; justify-content: center;">
                            <div class="form-group" style="flex:1; min-width: 120px; text-align:left;">
                              <label for="sync-status" style="text-align:left; display:block;">Status</label>
                              <select id="sync-status" name="status" class="form-control" style="text-align:left;">
                                <option value="">Select status</option>
                              </select>
                            </div>
                            <div class="form-group" style="flex:1; min-width: 120px; text-align:left; padding-top: 28px;">
                              <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="sync-cables" name="sync_cables">
                                <label class="form-check-label" for="sync-cables">Sync Cables</label>
                              </div>
                            </div>
                            <div class="form-group" style="flex:1; min-width: 120px; text-align:left; padding-top: 28px;">
                              <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="sync-software-version" name="sync_software_version">
                                <label class="form-check-label" for="sync-software-version">Sync Software</label>
                              </div>
                            </div>
                          </div>
                          <div style="display: flex; gap: 16px; margin-bottom: 12px; align-items: flex-start; justify-content: center;">
                            <div class="form-group" style="flex:1; min-width: 120px; text-align:left;">
                              <label for="sync-namespace" style="text-align:left; display:block;">Namespace</label>
                              <select id="sync-namespace" name="namespace" class="form-control" style="text-align:left;">
                                <option value="">Select namespace</option>
                              </select>
                            </div>
                            <div class="form-group" style="flex:1; min-width: 120px; text-align:left; padding-top: 28px;">
                              <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="sync-vlans" name="sync_vlans">
                                <label class="form-check-label" for="sync-vlans">Sync VLANs</label>
                              </div>
                            </div>
                            <div class="form-group" style="flex:1; min-width: 120px; text-align:left; padding-top: 28px;">
                              <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="sync-vrfs" name="sync_vrfs">
                                <label class="form-check-label" for="sync-vrfs">Sync VRFs</label>
                              </div>
                            </div>
                          </div>
                          <button id="sync-btn" type="submit">Sync Devices</button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /page content -->
        <!-- Footer -->
        <footer class="footer">
          <div class="container container-custom">
            <p>&copy; 2025 Gentelella. Bootstrap Admin Template by <a href="https://colorlib.com">Colorlib</a>. Built with ❤️ for developers worldwide.</p>
          </div>
        </footer>
      </div>
    </div>
    <script src="js/sync_devices.js"></script>
    <script>
      // Ensure logout functions work and user display is updated
      document.addEventListener('DOMContentLoaded', function() {
        console.log('Sync devices page loaded, setting up logout and user display');
        
        // Update user display immediately if authenticated
        if (window.authManager && window.authManager.isAuthenticated()) {
          window.authManager.updateUserDisplay();
        }
        
        // Direct logout button handlers as backup
        const sidebarLogout = document.getElementById('sidebar-logout');
        const dropdownLogout = document.getElementById('dropdown-logout');
        
        if (sidebarLogout) {
          console.log('Found sidebar logout button');
          sidebarLogout.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('Sidebar logout clicked');
            if (window.logout) {
              window.logout();
            } else if (window.authManager) {
              window.authManager.logout();
            } else {
              localStorage.clear();
              window.location.href = 'login.html';
            }
          });
        }
        
        if (dropdownLogout) {
          console.log('Found dropdown logout button');
          dropdownLogout.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('Dropdown logout clicked');
            if (window.logout) {
              window.logout();
            } else if (window.authManager) {
              window.authManager.logout();
            } else {
              localStorage.clear();
              window.location.href = 'login.html';
            }
          });
        }
      });
    </script>
  </body>
</html>
